require 'nokogiri'
require 'open-uri'
require 'search'

if ARGV.length < 2 
    p 'Modo de Uso: ./ruby program file http(s)://site.com.br'
    exit
end
def BuscaUrlContent (file,url)
    out = File.new("#{ARGV[0]}.txt", "w")
    baseurl = "#{ARGV[1]}"
    doc = Nokogiri::HTML(URI.open("#{baseurl}"))
    doc.xpath('//a/@href').each do |link|
            if link.content[0,1] === '/'
                out.puts "#{baseurl}"+link.content
            elsif link.content[0,1] === '#'
                
            else
        out.puts link.content
    
    end
    end
end
def recursivo (url)
    doc = Nokogiri::HTML(URI.open("#{url}"))
    doc.xpath('//a/@href').each do |link|
            if link.content[0,1] === '/'
                out.puts "#{url}"+link.content
            elsif link.content[0,1] === '#'
                
            else
        out.puts link.content
    
    end
    end
end
BuscaUrlContent(ARGV[0],ARGV[1])
# Falta implementar a busca recursiva em cada pesquisa de 
# url encontrada na página alvo e também enviar cookies na 
# requisição caso o usuário esteja autenticado